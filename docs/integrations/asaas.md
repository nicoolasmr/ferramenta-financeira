
# Integration: Asaas

## Overview
Asaas is the primary billing provider for Brazilian PIX/Boleto payments. This integration captures payments, refunds, and overdue alerts.

## Configuration (User)
1.  **Webhook**: The user must paste the URL generated by RevenueOS into Asaas (`Configurações -> Integrações`).
2.  **Token**: The user must provide the `Access Token` generated in Asaas.

## Events Handled
| Asaas Event | Domain Event | Description |
| :--- | :--- | :--- |
| `PAYMENT_CONFIRMED` | `payment.succeeded` | Paid via PIX/Boleto/Card. |
| `PAYMENT_RECEIVED` | `payment.succeeded` | Same as confirmed usually. |
| `PAYMENT_REFUNDED` | `payment.refunded` | Full or partial refund. |
| `PAYMENT_OVERDUE` | `invoice.overdue` | Late payment alert. |

## Operations
- **Verification**: Signature checked against `asaas-access-token` header.
- **Retry**: Standard Backoff (1m, 2m, 4m).
- **Backfill**: Supported via `triggerBackfill` (requires API Key).

## Troubleshooting
- **401 Unauthorized**: User likely rotated the Access Token in Asaas but updated RevenueOS.
- **Missing Payments**: Check if "Cobrança criada" checkbox is enabled in Asaas Webhook config.
