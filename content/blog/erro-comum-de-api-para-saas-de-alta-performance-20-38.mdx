---
title: "Rate Limiting: Protegendo sua API Financeira de Abusos"
excerpt: "Não deixe um script mal feito derrubar seu banco de dados. Aprenda a implementar algoritmos de Token Bucket e Leaky Bucket no seu gateway."
date: "2026-03-08T03:00:00.000Z"
category: "API & Integrações"
tags: ["Rate Limit", "Performance", "DDoS", "Redis"]
readingTime: "9 min"
author: "RevenueOS Team"
---

# Rate Limiting: O Guarda-Costas da sua Infraestrutura

Você lança sua API pública. Um desenvolvedor júnior faz um loop `while(true)` chamando seu endpoint de `/reports` (que é pesado).
Resultado: CPU em 100%, banco travado, site fora do ar para todos os clientes.

Rate Limiting não é opcional. É higiene básica.

## Estratégias de Limite

### 1. Fixed Window (Janela Fixa)
"100 requests por minuto".
*   **Problema:** Se o usuário mandar 100 requests no segundo 59 e mais 100 no segundo 01, ele mandou 200 requests em 2 segundos. Isso gera picos (Spikes).

### 2. Sliding Window (Janela Deslizante)
Conta os requests nos últimos 60 segundos exatos. Mais preciso, mais caro computacionalmente (Redis Sorted Sets).

### 3. Token Bucket (O Padrão Ouro)
O usuário tem um "balde" com 10 fichas.
Cada request gasta 1 ficha.
O balde enche a uma taxa constante (ex: 1 ficha por segundo).
*   **Vantagem:** Permite "Bursts" curtos (tráfego legítimo) mas freia abuso constante.

## Cabeçalhos HTTP (DX)

Se você bloquear o usuário (`429 Too Many Requests`), diga a ele quando voltar.

```http
HTTP/1.1 429 Too Many Requests
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1678900000 (Unix Timestamp)
Retry-After: 30
```

Isso permite que bibliotecas inteligentes esperem automaticamente (Backoff).

## Rate Limit no RevenueOS

Nós protegemos sua operação financeira com camadas:
1.  **WAF (Edge):** Bloqueia ataques DDoS volumétricos.
2.  **API Gateway:** Limite por IP e por API Key.
3.  **Database Protection:** Circuit Breakers que impedem queries lentas de derrubar o cluster.

<CTABox 
  title="Infraestrutura Resiliente" 
  subtitle="Processamos milhões de requests sem downtime. Conheça nossa arquitetura." 
  buttonText="Ver Status Page" 
  href="/status" 
/>
