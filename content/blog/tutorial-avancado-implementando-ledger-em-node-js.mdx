---
title: "Ledger Design: Como modelar um Livro Razão em SQL"
excerpt: "Contabilidade de Partidas Dobradas (Double Entry) para desenvolvedores. Como evitar destruir dinheiro no seu banco de dados."
date: "2026-04-19T03:00:00.000Z"
category: "Tech & Engenharia"
tags: ["Ledger", "SQL", "Database", "Arquitetura"]
readingTime: "14 min"
author: "RevenueOS Team"
---

# Debit = Credit

Essa é a única regra que importa. A soma de todos os débitos deve ser igual a soma de todos os créditos. Sempre.
Se não for, dinheiro foi criado ou destruído.

## Schema Básico: Tabela Ledger

```sql
CREATE TABLE ledger_entries (
  id UUID PRIMARY KEY,
  transaction_id UUID,
  account_id UUID,
  direction ENUM('DEBIT', 'CREDIT'),
  amount BIGINT, -- Cents!
  created_at TIMESTAMP
);
```

## Transação de Pagamento de Fatura

Quando o cliente paga R$ 100,00:
1.  **DEBIT:** Conta "Gateway Cash" (Ativo) -> R$ 100.
2.  **CREDIT:** Conta "Accounts Receivable" (Ativo) -> R$ 100 (Baixa a dívida).

Se houver taxa do Stripe de R$ 3,00:
3.  **CREDIT:** Conta "Gateway Cash" -> R$ 3.
4.  **DEBIT:** Conta "Gateway Fees" (Despesa) -> R$ 3.

Resultado líquido no Gateway: R$ 97.

## Imutabilidade

Nunca use `UPDATE ledger_entries`.
Se houve erro, crie uma **Transação de Estorno** invertendo os lançamentos.
Isso garante auditoria perfeita.

O RevenueOS Ledger funciona assim. Nós damos a você um plano de contas (Chart of Accounts) pronto para SaaS.

<CTABox 
  title="Ledger as a Service" 
  subtitle="Nosso motor contábil garante integridade financeira para sua aplicação." 
  buttonText="Conhecer Ledger" 
  href="/features/ledger" 
/>
